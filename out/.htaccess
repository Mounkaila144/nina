# Configuration for Next.js static export
<IfModule mod_rewrite.c>
  RewriteEngine On
  
  # Don't rewrite existing files and directories
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  
  # Skip rewrite for assets
  RewriteRule \.(css|js|png|jpg|jpeg|gif|ico|svg|webp|woff|woff2|ttf|eot|json|xml|txt)$ - [L]
  
  # Handle static exports - redirect to the appropriate index.html
  # Root
  RewriteRule ^$ /index.html [L]
  
  # Specific pages
  RewriteRule ^massage/?$ /massage/index.html [L]
  RewriteRule ^nina-store/?$ /nina-store/index.html [L] 
  RewriteRule ^store/?$ /store/index.html [L]
  RewriteRule ^admin/?$ /admin/index.html [L]
  
  # Admin subpages
  RewriteRule ^admin/login/?$ /admin/login/index.html [L]
  RewriteRule ^admin/clients/?$ /admin/clients/index.html [L]
  RewriteRule ^admin/services/?$ /admin/services/index.html [L]
  RewriteRule ^admin/products/?$ /admin/products/index.html [L]
  RewriteRule ^admin/sales/?$ /admin/sales/index.html [L]
  RewriteRule ^admin/appointments/?$ /admin/appointments/index.html [L]
  RewriteRule ^admin/employees/?$ /admin/employees/index.html [L]
  RewriteRule ^admin/reports/?$ /admin/reports/index.html [L]
  RewriteRule ^admin/accounting/?$ /admin/accounting/index.html [L]
  RewriteRule ^admin/expenses/?$ /admin/expenses/index.html [L]
  RewriteRule ^admin/purchases/?$ /admin/purchases/index.html [L]
  RewriteRule ^admin/settings/?$ /admin/settings/index.html [L]
  
  # Fallback for 404
  RewriteRule . /404.html [L]
  
</IfModule>

# Gzip compression
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/xml
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/x-javascript
  AddOutputFilterByType DEFLATE image/svg+xml
</IfModule>

# Cache headers
<IfModule mod_expires.c>
  ExpiresActive on
  ExpiresByType text/css "access plus 1 year"
  ExpiresByType application/javascript "access plus 1 year"  
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType font/woff2 "access plus 1 year"
</IfModule>